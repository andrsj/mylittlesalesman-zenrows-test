# MLS (mylittlesalesman.com) ZenRows Test Suite

**Date:** January 23, 2026
**SDK:** `github.com/zenrows/zenrows-go-sdk/service/api v1.0.1`
**Go Version:** 1.24+

---

## Overview

This test suite verifies ZenRows scraping capabilities against mylittlesalesman.com. All tests currently fail due to Cloudflare protection with reCAPTCHA Enterprise.

---

## Files

| File | Description |
|------|-------------|
| `go.mod` | Go module definition with dependencies |
| `go.sum` | Dependency checksums (generated by `go mod tidy`) |
| `extractor.go` | Helper function to marshal struct tags into ZenRows CSS extractor JSON |
| `scraper_test.go` | 5 test cases covering search and detail pages |
| `README.md` | This documentation |

---

## Setup

```bash
# Navigate to test directory
cd mylittlesalesman

# Download dependencies
go mod tidy

# Set API key
export ZENROWS_API_KEY=your_api_key_here
```

---

## Running Tests

### Run all tests
```bash
ZENROWS_API_KEY=your_key go test -v -timeout 600s
```

### Run specific test
```bash
ZENROWS_API_KEY=your_key go test -v -run TestZenRowsMLSListingPage -timeout 120s
ZENROWS_API_KEY=your_key go test -v -run TestZenRowsMLSSupportURL -timeout 120s
```

---

## Test Descriptions

### Test 1: TestZenRowsMLSListingPage

Tests search/listing page with CSS extractor.

**URL:** `https://www.mylittlesalesman.com/trucks-for-sale-i2c0f0m0?ptid=1&s=11`

**Parameters:**
```go
&scraperapi.RequestParameters{
    JSRender:          true,
    UsePremiumProxies: true,
    ProxyCountry:      "US",
    WaitMilliseconds:  30000,
    CSSExtractor:      MarshalExtractor(pageResp),
    CustomParams: map[string]string{
        "antibot": "true",
    },
}
```

**Expected:** Title "Trucks For Sale" and array of listing URLs
**Actual:** Title "Checking your browser", empty URLs

---

### Test 2: TestZenRowsMLSRawHTML

Tests search/listing page returning raw HTML (no CSS extraction).

**URL:** `https://www.mylittlesalesman.com/trucks-for-sale-i2c0f0m0?ptid=1&s=11`

**Parameters:**
```go
&scraperapi.RequestParameters{
    JSRender:          true,
    UsePremiumProxies: true,
    ProxyCountry:      "US",
    WaitMilliseconds:  30000,
    CustomParams: map[string]string{
        "session_id": "12345",
    },
}
```

**Expected:** Full HTML with truck listings
**Actual:** Cloudflare challenge page with reCAPTCHA Enterprise

---

### Test 3: TestZenRowsMLSSupportURL

Tests the exact URL that ZenRows support claimed works.

**URL:** `https://www.mylittlesalesman.com/international-lt625-sleeper-semi-trucks-for-sale-i2c55f339m564445`

**Parameters:**
```go
&scraperapi.RequestParameters{
    JSRender:          true,
    UsePremiumProxies: true,
}
```

**Expected:** Actual page content
**Actual:** Cloudflare challenge page with reCAPTCHA Enterprise

---

### Test 4: TestZenRowsMLSDetailPageRaw

Tests detail/listing page returning raw HTML.

**URL:** `https://www.mylittlesalesman.com/2022-freightliner-cascadia-126-sleeper-semi-truck-72-condo-sleeper-455hp-12-speed-automatic-14042329`

**Parameters:**
```go
&scraperapi.RequestParameters{
    JSRender:          true,
    UsePremiumProxies: true,
    ProxyCountry:      "US",
    WaitMilliseconds:  30000,
}
```

**Expected:** Full HTML with listing details
**Actual:** Cloudflare challenge page with reCAPTCHA Enterprise

---

### Test 5: TestZenRowsMLSDetailPage

Tests detail/listing page with CSS extractor.

**URL:** `https://www.mylittlesalesman.com/2022-freightliner-cascadia-126-sleeper-semi-truck-72-condo-sleeper-455hp-12-speed-automatic-14042329`

**Parameters:**
```go
&scraperapi.RequestParameters{
    JSRender:          true,
    UsePremiumProxies: true,
    ProxyCountry:      "US",
    WaitMilliseconds:  30000,
    CSSExtractor:      MarshalExtractor(listingResp),
    CustomParams: map[string]string{
        "antibot": "true",
    },
}
```

**Expected:** Title, price, description, details
**Actual:** All fields empty (blocked)

---

## Full Test Output (January 23, 2026)

```
=== RUN   TestZenRowsMLSListingPage
    scraper_test.go:44: Fetching MLS listing page: https://www.mylittlesalesman.com/trucks-for-sale-i2c0f0m0?ptid=1&s=11
    scraper_test.go:64: Response status: 200
    scraper_test.go:65: Response body length: 43 bytes
    scraper_test.go:66: Raw response: {"title":"Checking your browser","urls":""}
    scraper_test.go:69: Failed to unmarshal response: json: slice unexpected end of JSON input
    scraper_test.go:70: Continuing with empty response...
    scraper_test.go:73: Page title: Checking your browser
    scraper_test.go:74: Found 0 listing URLs
    scraper_test.go:88: WARNING: Possibly blocked
    scraper_test.go:89: Raw response: {"title":"Checking your browser","urls":""}
    scraper_test.go:93: WARNING: Unexpected title - might be blocked or different page
--- PASS: TestZenRowsMLSListingPage (32.67s)
=== RUN   TestZenRowsMLSRawHTML
    scraper_test.go:111: Fetching MLS raw HTML: https://www.mylittlesalesman.com/trucks-for-sale-i2c0f0m0?ptid=1&s=11
    scraper_test.go:131: Response status: 200
    scraper_test.go:132: Response body length: 20016 bytes
    scraper_test.go:133: First 1000 bytes: <html class="t-chrome t-chrome138"><head><meta http-equiv="origin-trial" content="..."><title>
        	Checking your browser
        </title><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta name="robots" content="noindex, nofollow"><link href="/styles/public.min.css?d=20160809" type="text/css" rel="stylesheet">
        <script type="text/javascript" async="" charset="utf-8" src="https://www.gstatic.com/recaptcha/releases/PoyoqOPhxBO7pBk68S4YbpHZ/recaptcha__en.js" crossorigin="anonymous" integrity="sha384-CsMESSmpdyXn2oSFisDd6UA6lT/9DlfGd77o9JZlC2/zeLHxhb5UOwKTAkz7dFBg"></script><script src="https://www.google.com/recaptcha/enterprise.js" async="" defer=""></script>
--- PASS: TestZenRowsMLSRawHTML (32.49s)
=== RUN   TestZenRowsMLSSupportURL
    scraper_test.go:151: Fetching URL that ZenRows support tested: https://www.mylittlesalesman.com/international-lt625-sleeper-semi-trucks-for-sale-i2c55f339m564445
    scraper_test.go:166: Response status: 200
    scraper_test.go:167: Response body length: 16268 bytes
    scraper_test.go:168: First 1500 bytes: <html class="t-chrome t-chrome138"><head><meta http-equiv="origin-trial" content="..."><title>
        	Checking your browser
        </title><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta name="robots" content="noindex, nofollow"><link href="/styles/public.min.css?d=20160809" type="text/css" rel="stylesheet">
        <script type="text/javascript" async="" charset="utf-8" src="https://www.gstatic.com/recaptcha/releases/PoyoqOPhxBO7pBk68S4YbpHZ/recaptcha__en.js" crossorigin="anonymous" integrity="sha384-CsMESSmpdyXn2oSFisDd6UA6lT/9DlfGd77o9JZlC2/zeLHxhb5UOwKTAkz7dFBg"></script><script src="https://www.google.com/recaptcha/enterprise.js?render=6LfdhLcrAAAAAE42v2zraS3k_DkidE0OtH89w-q7"></script>
    scraper_test.go:172: ‚ùå BLOCKED: Got Cloudflare challenge page
--- PASS: TestZenRowsMLSSupportURL (5.51s)
=== RUN   TestZenRowsMLSDetailPageRaw
    scraper_test.go:209: Fetching MLS detail page raw HTML: https://www.mylittlesalesman.com/2022-freightliner-cascadia-126-sleeper-semi-truck-72-condo-sleeper-455hp-12-speed-automatic-14042329
    scraper_test.go:222: Response status: 200
    scraper_test.go:223: Response body length: 20196 bytes
    scraper_test.go:224: First 1500 bytes: <html class="t-chrome t-chrome138"><head><meta http-equiv="origin-trial" content="..."><title>
        	Checking your browser
        </title><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta name="robots" content="noindex, nofollow"><link href="/styles/public.min.css?d=20160809" type="text/css" rel="stylesheet">
        <script type="text/javascript" async="" charset="utf-8" src="https://www.gstatic.com/recaptcha/releases/PoyoqOPhxBO7pBk68S4YbpHZ/recaptcha__en.js" crossorigin="anonymous" integrity="sha384-CsMESSmpdyXn2oSFisDd6UA6lT/9DlfGd77o9JZlC2/zeLHxhb5UOwKTAkz7dFBg"></script><script src="https://www.google.com/recaptcha/enterprise.js" async="" defer=""></script>
    scraper_test.go:227: ‚ùå BLOCKED: Got Cloudflare challenge page
--- PASS: TestZenRowsMLSDetailPageRaw (32.10s)
=== RUN   TestZenRowsMLSDetailPage
    scraper_test.go:249: Fetching MLS detail page: https://www.mylittlesalesman.com/2022-freightliner-cascadia-126-sleeper-semi-truck-72-condo-sleeper-455hp-12-speed-automatic-14042329
    scraper_test.go:269: Response status: 200
    scraper_test.go:270: Response body length: 80 bytes
    scraper_test.go:271: Raw response: {"description":"","details_labels":"","details_values":"","price":"","title":""}
    scraper_test.go:274: Failed to unmarshal response: json: slice unexpected end of JSON input
    scraper_test.go:277: Title:
    scraper_test.go:278: Price:
    scraper_test.go:279: Description length: 0 chars
    scraper_test.go:280: Details labels: []
    scraper_test.go:281: Details values: []
    scraper_test.go:285: WARNING: No title - possibly blocked or page not found
    scraper_test.go:286: Raw response: {"description":"","details_labels":"","details_values":"","price":"","title":""}
--- PASS: TestZenRowsMLSDetailPage (31.95s)
PASS
ok  	mls-test	135.006s
```

---

## Results Summary

| # | Test | URL Type | Result |
|---|------|----------|--------|
| 1 | TestZenRowsMLSListingPage | Search page | ‚ùå "Checking your browser" |
| 2 | TestZenRowsMLSRawHTML | Search page (raw) | ‚ùå Cloudflare + reCAPTCHA Enterprise |
| 3 | TestZenRowsMLSSupportURL | ZenRows support URL | ‚ùå "Checking your browser" |
| 4 | TestZenRowsMLSDetailPageRaw | Detail page (raw) | ‚ùå Cloudflare + reCAPTCHA Enterprise |
| 5 | TestZenRowsMLSDetailPage | Detail page | ‚ùå Empty (blocked) |

**Total runtime:** 135 seconds
**Success rate:** 0/5 (0%)

---

## Protection Details

MLS uses Cloudflare with reCAPTCHA Enterprise:

```html
<title>Checking your browser</title>
<script src="https://www.google.com/recaptcha/enterprise.js?render=6LfdhLcrAAAAAE42v2zraS3k_DkidE0OtH89w-q7"></script>
```

### Secondary Protection: IP Address Blocking

MLS also has their own IP ban system (separate from Cloudflare). When triggered, shows "IP Address Blocked" page with:
- Standard reCAPTCHA v2 (not Enterprise)
- Site key: `6Lf3o4YUAAAAAOg_rngyaJagRHGf7pT4fTOZNIuJ`
- Form to request manual unblock

---

## CSS Extractor Schemas

### PageResponse (Search/Listing pages)
```go
type PageResponse struct {
    Title string   `json:"title" extractor:"h1"`
    URLs  []string `json:"urls" extractor:".content-card-inner > .row > .prhead > h3 > a[href*='/listing/'] @href"`
}
```

### ListingResponse (Detail pages)
```go
type ListingResponse struct {
    Title         string   `json:"title" extractor:"h1.pb3"`
    Price         string   `json:"price" extractor:"h2#ctl00_ctl00_mc_mc_retailHeader > span > .text-darkred"`
    Description   string   `json:"description" extractor:"#prddesc > div"`
    DetailsLabels []string `json:"details_labels" extractor:"#prddtl > table > tbody > tr > th"`
    DetailsValues []string `json:"details_values" extractor:"#prddtl > table > tbody > tr > td"`
}
```

---

## Dependencies

```
github.com/goccy/go-json v0.10.5
github.com/zenrows/zenrows-go-sdk/service/api v1.0.1
github.com/fatih/structs v1.1.0 (indirect)
github.com/go-resty/resty/v2 v2.15.3 (indirect)
github.com/gorilla/schema v1.4.1 (indirect)
github.com/hashicorp/go-version v1.7.0 (indirect)
golang.org/x/net v0.30.0 (indirect)
```

---

## Update: February 3, 2026

### Changes
- Increased timeout from 2 minutes to 5 minutes (`defaultTimeout = 5 * time.Minute`)
- Added HTML output saving to `output/<testName>/response.html` for each test
- Added `output/` to `.gitignore`

### Test Results

| # | Test | Duration | Result |
|---|------|----------|--------|
| 1 | TestZenRowsMLSListingPage | 163s | ‚ùå `RESP001: Could not get content` (HTTP 422) |
| 2 | TestZenRowsMLSRawHTML | 163s | ‚ùå `RESP001: Could not get content` (HTTP 422) |
| 3 | TestZenRowsMLSSupportURL | 58s | ‚ùå `RESP001: Could not get content` (HTTP 422) |
| 4 | TestZenRowsMLSDetailPageRaw | 160s | ‚ùå `RESP001: Could not get content` (HTTP 422) |
| 5 | TestZenRowsMLSDetailPage | ~56s | üí• Test suite timeout (10m total) |

**Total runtime:** 600s (hit Go test timeout)
**Success rate:** 0/5 (0%)

### Error Details

ZenRows now returns `RESP001` error for all mylittlesalesman.com URLs:

```json
{
  "code": "RESP001",
  "instance": "/v1",
  "status": 422,
  "title": "Could not get content (RESP001)",
  "type": "https://docs.zenrows.com/api-error-codes#RESP001"
}
```

### Comparison: January vs February

| Date | Error Type | HTTP Status | ZenRows Response |
|------|------------|-------------|------------------|
| January 23 | Cloudflare bypass worked, but got challenge page | 200 | HTML with "Checking your browser" + reCAPTCHA Enterprise |
| February 3 | ZenRows cannot reach content at all | 422 | JSON error `RESP001: Could not get content` |

### Note on `proxy_country` Parameter

Tested both `"US"` and `"us"` for `ProxyCountry` - no difference in results. ZenRows accepts both formats.

### Conclusion

ZenRows has gone from "partially working but blocked by Cloudflare" to "completely unable to fetch content" from mylittlesalesman.com. The site's protection has likely been upgraded or ZenRows' proxies are now fully blocked.
